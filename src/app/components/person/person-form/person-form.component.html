<div class="container mat-elevation-z8">

  <form class="form">

    <h1 class="fullWidth">{{ personId ? 'Editar Colaborador: ' + person.name : 'Cadastrar Colaborador' }}</h1>
    <img class="fullWidth" src="assets/img/tecnico-create.svg" alt="Cadastrar Colaborador">

    <section class="section">
      <mat-checkbox (click)="addPersonType(1)" [disabled]="true" class="margin" [checked]="true" color="primary">Colaborador</mat-checkbox>
    </section>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Nome</mat-label>
      <input
        [(ngModel)]="person.name"
        name="name"
        [formControl]="name"
        required
        matInput
        placeholder="Ex. Maria da Silva"
        maxlength="100" >
      <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>CPF</mat-label>
      <input
      [(ngModel)]="person.cpf"
      name="cpf"
      [formControl]="cpf"
      required
      matInput
      placeholder="Ex..000.000.000-00"
      mask="000.000.000-00">
      <mat-icon matSuffix>pin </mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="outline">
      <mat-label>Selecione o Departamento</mat-label>
      <mat-select
        [(ngModel)]="person.departmentsId"
        name="department"
        [formControl]="department"
        multiple>
        <mat-option *ngFor="let department of departments" [value]="department.id">{{ department.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="outline">
      <mat-label>Selecione a Responsabilidade</mat-label>
      <mat-select
        [(ngModel)]="person.responsibilityId"
        name="responsibility"
        [formControl]="responsibility">
        <mat-option *ngFor="let responsibility of responsibilities" [value]="responsibility.id">{{ responsibility.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Nome de Usu√°rio</mat-label>
      <input
      [(ngModel)]="person.user.username"
      name="username"
      [formControl]="username"
      required
      matInput
      placeholder="Ex.. fulano44">
      <mat-icon matSuffix>person</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>E-mail</mat-label>
      <input
      [(ngModel)]="person.user.email"
      name="email"
      [formControl]="email"
      required
      matInput
      placeholder="Ex.. fulano@mail.com">
      <mat-icon matSuffix>email</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Senha</mat-label>
      <input
      [(ngModel)]="person.user.password"
      name="password"
      [formControl]="password"
      required
      type="password"
      matInput
      placeholder="Ex.. 1234">
      <mat-icon matSuffix>password</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="outline">
      <mat-label>Selecione o cargo</mat-label>
      <mat-select
        [(ngModel)]="person.user.role"
        name="role"
        [formControl]="role"
        required
        multiple>
        <mat-option *ngFor="let role of roleLabels" [value]="role.value">{{ role.label }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>CEP</mat-label>
      <input
      [(ngModel)]="person.address.cep"
      name="cep"
      [formControl]="cep"
      required
      type="cep"
      matInput
      placeholder="Ex.. 12.444-666">
      <mat-icon matSuffix>location_on</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Bairro</mat-label>
      <input
      [(ngModel)]="person.address.neighborhood"
      name="neighborhood"
      [formControl]="neighborhood"
      required
      type="neighborhood"
      matInput
      placeholder="Ex.. vila das neves">
      <mat-icon matSuffix>signpost</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Rua</mat-label>
      <input
      [(ngModel)]="person.address.streetName"
      name="streetName"
      [formControl]="streetName"
      required
      type="streetName"
      matInput
      placeholder="Ex.. rua das neves">
      <mat-icon matSuffix>add_road</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Cidade</mat-label>
      <input
      [(ngModel)]="person.address.city"
      name="city"
      [formControl]="city"
      required
      type="city"
      matInput
      placeholder="Ex.. Pontalina">
      <mat-icon matSuffix>location_city</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Estado</mat-label>
      <input
      [(ngModel)]="person.address.uf"
      name="uf"
      [formControl]="uf"
      required
      type="uf"
      matInput
      placeholder="Ex.. Pontalina">
      <mat-icon matSuffix>satellite</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="legacy">
      <mat-label>Complemento</mat-label>
      <input
      [(ngModel)]="person.address.complement"
      name="complement"
      [formControl]="complement"
      required
      type="complement"
      matInput
      placeholder="Ex.. Pontalina">
      <mat-icon matSuffix>edit_location_alt</mat-icon>
    </mat-form-field>

    <mat-form-field class="fullWidth" appearance="outline">
      <mat-label>Selecione as Tarefas</mat-label>
      <mat-select
        [(ngModel)]="person.tasks"
        name="task"
        [formControl]="task"
        multiple>
        <mat-option *ngFor="let task of tasks" [value]="task">{{ task.name }}</mat-option>
      </mat-select>
    </mat-form-field>    

    <mat-form-field class="fullWidth" appearance="outline">
      <mat-label>Selecione as rotinas</mat-label>
      <mat-select
        [(ngModel)]="person.routine"
        name="routine"
        [formControl]="routine">
        <mat-option *ngFor="let routine of routines" [value]="routine">{{ routine.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <button (click)="openPersonForm()" [disabled]="!validateFields()" class="fullWidth mat-elevation-z4" mat-flat-button color="primary">
      {{ personId ? 'Salvar' : 'Cadastrar' }}
    </button>
    <button routerLink="../" class="fullWidth mat-elevation-z4" mat-stroked-button color="warn">Cancelar</button>
  </form>

</div>
