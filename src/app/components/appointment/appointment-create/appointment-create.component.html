<div class="container mat-elevation-z8">

  <form class="form">

    <h1 class="fullWidth">Projeção Profissional</h1>

    <mat-form-field class="fourColumn" appearance="outline">
      <mat-label>Unidade</mat-label>
      <mat-select
        [(ngModel)]="companyId"
        name="holding"
        [formControl]="company"
        required
        (selectionChange)="findAllPersonByCompany($event.value)"
        #companySelected
        >
      <mat-option *ngFor="let company of companies" value="{{ company.id }}">{{ company.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="fourColumn" appearance="outline">
      <mat-label>Profissional</mat-label>
      <mat-select
        [(ngModel)]="personId"
        name="holding"
        [formControl]="person"
        required>
      <mat-option *ngFor="let person of persons" value="{{ person.id }}">{{ person.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <button (click)="search()" class="fourColumn" mat-flat-button color="primary">Pesquisar</button>
  </form>

  <mat-tab-group *ngIf="isSelected" animationDuration="0ms">

    <!-- Tab 1-->
    <mat-tab label="Diária">

      <div class="person-routines-container">
        <div class="person-routine-list" *ngIf="personRoutines.length; else noRoutineData">
          <span class="person-routine-list__title"><strong>Rotinas</strong></span>
          <div class="person-routine-list__item" *ngFor="let routine of personRoutines">
            <label><strong>{{routine.name}}</strong></label>
            <div class="routine-appointment-wrapper">
              <mat-radio-group
                aria-labelledby="example-radio-group-label"
                class="example-radio-group"
                [(ngModel)]="routine.tag">
                <mat-radio-button class="example-radio-button" *ngFor="let tag of tags" [value]="tag" [ngClass]="tag.class" [matTooltip]="tag.description" (click)="openDescriptionDialog(routine)"></mat-radio-button>
              </mat-radio-group>
              <i class="material-icons edit" *ngIf="routine.tag" (click)="openDescriptionDialog(routine)">chat</i>
            </div>
          </div>
        </div>
        <ng-template #noRoutineData>
          <div>
            <span>Ainda não há rotinas vinculadas a este colaborador</span>
          </div>
        </ng-template>
      </div>

      <div class="person-tasks-container">
        <div class="person-task-list" *ngIf="personTasks.length; else noTaskData">
          <span class="person-task-list__title"><strong>Tarefas</strong></span>
          <div class="person-task-list__item" *ngFor="let task of personTasks">
            <label><strong>{{task.name}}</strong></label>
            <div class="task-appointment-wrapper">
              <mat-radio-group
                aria-labelledby="example-radio-group-label"
                class="example-radio-group"
                [(ngModel)]="task.tag">
                <mat-radio-button class="example-radio-button" *ngFor="let tag of tags" [value]="tag" [ngClass]="tag.class" [matTooltip]="tag.description" (click)="openDescriptionDialog(task)"></mat-radio-button>
              </mat-radio-group>
              <i class="material-icons edit" *ngIf="task.tag" (click)="openDescriptionDialog(task)">chat</i>
            </div>
          </div>
        </div>
        <ng-template #noTaskData>
          <div>
            <span>Ainda não há tarefas vinculadas a este colaborador</span>
          </div>
        </ng-template>
      </div>

      <div class="person-assignments-container">
        <div class="person-assignment-list" *ngIf="personAssignments.length; else noAssignmentData">
          <span class="person-assignment-list__title"><strong>Atribuições</strong></span>
          <div class="person-assignment-list__item" *ngFor="let assignment of personAssignments">
            <label><strong>{{assignment.name}}</strong></label>
            <div class="assignment-appointment-wrapper">
              <mat-radio-group
                aria-labelledby="example-radio-group-label"
                class="example-radio-group"
                [(ngModel)]="assignment.tag">
                <mat-radio-button class="example-radio-button" *ngFor="let tag of tags" [value]="tag" [ngClass]="tag.class" [matTooltip]="tag.description" (click)="openDescriptionDialog(assignment)"></mat-radio-button>
              </mat-radio-group>
              <i class="material-icons edit" *ngIf="assignment.tag" (click)="openDescriptionDialog(assignment)">chat</i>
            </div>
          </div>
        </div>
        <ng-template #noAssignmentData>
          <div>
            <span>Ainda não há atribuições vinculadas a este colaborador</span>
          </div>
        </ng-template>
      </div>

    </mat-tab>

    <!-- Tab 2 -->
    <mat-tab label="Mensal">Content 2</mat-tab>

    <!-- Tab 3 -->
    <mat-tab label="Trimestral">Content 3</mat-tab>

    <!-- Tab 4 -->
    <mat-tab label="Semestral">Content 3</mat-tab>
  </mat-tab-group>

</div>
