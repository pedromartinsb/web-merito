<div class="container my-5">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/home">Home</a></li>
      <li class="breadcrumb-item"><a routerLink="/employees">Colaboradores</a></li>
      <li class="breadcrumb-item active" aria-current="page">Adicionar Novo Usuário</li>
    </ol>
  </nav>

  <h1>Cadastro de Colaborador</h1>

  <div class="container my-5">
    <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
      <!-- Section 1: Informações pessoais -->
      <section class="mb-4">
        <h5 class="border-bottom pb-2">Informações Pessoais</h5>

        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="name" class="form-label">Nome Completo</label>
            <input type="text" id="name" formControlName="name" class="form-control" placeholder="Seu nome">
          </div>
          <div class="col-md-4 mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" id="email" formControlName="email" class="form-control" placeholder="Seu email">
          </div>
          <div class="col-md-4 mb-3">
            <label for="cpf" class="form-label">CPF</label>
            <input type="text" id="cpf" formControlName="cpf" class="form-control" placeholder="000.000.000-00" mask="000.000.000-00">
          </div>

          <div class="col-md-4 mb-3">
            <label for="birthdate" class="form-label">Data de Nascimento</label>
            <input type="date" id="birthdate" formControlName="birthdate" class="form-control">
          </div>
          <div class="col-md-4 mb-3">
            <label for="gender" class="form-label">Gênero</label>
            <select id="gender" formControlName="gender" class="form-select">
              <option value="" disabled selected>Selecione</option>
              <option value="male">Masculino</option>
              <option value="female">Feminino</option>
              <option value="other">Outro</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label for="contractType" class="form-label">Tipo de Contrato</label>
            <select id="contractType" formControlName="contractType" class="form-select">
              <option value="" disabled selected>Selecione</option>
              <option value="Clt">CLT</option>
              <option value="Professional">Profissional Autônomo</option>
              <option value="Supplier">Fornecedor</option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label for="username" class="form-label">Nome de usuário</label>
            <input type="text" id="username" formControlName="username" class="form-control" placeholder="Seu usuário de acesso">
          </div>
          <div class="col-md-3 mb-3">
            <label for="password" class="form-label">Senha</label>
            <input type="password" id="password" formControlName="password" class="form-control">
          </div>
          <div class="col-md-3 mb-3">
            <label for="password" class="form-label">Confirme a Senha</label>
            <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control">
          </div>

          <div class="col-md-4 mb-3">
            <label for="officeSelected" class="form-label">Empresa</label>
            <select id="officeSelected" class="form-select" (change)="onOfficeChange($event)">
              <option value="" disabled selected>Selecione a Empresa</option>
              <option *ngFor="let office of offices" [value]="office['id']">{{ office['name'] }}</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label for="responsibilitySelected" class="form-label">Cargo</label>
            <select id="responsibilitySelected" class="form-select" (change)="onResponsibilityChange($event)">
              <option value="" disabled selected>Selecione o Cargo</option>
              <option *ngFor="let responsibility of responsibilities" [value]="responsibility['id']">{{ responsibility['name'] }}</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label for="gender" class="form-label">Supervisor</label>
            <select id="gender" formControlName="gender" class="form-select">
              <option value="" disabled selected>Selecione o Supervisor</option>
              <option value="male">Masculino</option>
              <option value="female">Feminino</option>
              <option value="other">Outro</option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label for="password" class="form-label">Selecione a Foto</label>
            <input type="file" id="photo" formControlName="photo" class="form-control" (change)="onFileSelected($event)">
          </div>
          <div class="col-md-6 mb-3">
            <img [src]="imageUrl" alt="Foto do Colaborador" class="img-thumbnail" width="150">
          </div>
        </div>
      </section>

      <!-- Section 3: Telefones -->
      <section class="mb-4">
        <h5 class="border-bottom pb-2">Telefones</h5>

        <table class="table table-bordered" formArrayName="phones">
          <thead>
          <tr>
            <th>Número de Telefone</th>
            <th>Ações</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let phone of phones.controls; let i = index" [formGroupName]="i">
            <td>
              <label for="phone-{{ i }}">Telefone {{ i + 1 }}</label>
              <input id="phone-{{ i }}" type="text" class="form-control" formControlName="phone" placeholder="(00) 00000-0000" mask="(00) 00000-0000">
            </td>
            <td>
              <button type="button" class="btn btn-danger" (click)="removePhone(i)" *ngIf="phones.length > 1">Remover</button>
            </td>
          </tr>
          </tbody>
        </table>
        <button type="button" class="btn btn-secondary border-bottom" (click)="addPhone()">Adicionar Telefone</button>
      </section>

      <section class="mt-4 mb-4">
        <h5 class="border-bottom pb-2">Endereço</h5>

        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="cep" class="form-label">CEP</label>
            <input type="text" id="cep" formControlName="cep" class="form-control" placeholder="00.000-000" mask="00.000-000">
          </div>
          <div class="col-md-4 mb-3">
            <label for="uf" class="form-label">Estado</label>
            <input type="text" id="uf" formControlName="uf" class="form-control">
          </div>
          <div class="col-md-4 mb-3">
            <label for="city" class="form-label">Cidade</label>
            <input type="text" id="city" formControlName="city" class="form-control">
          </div>

          <div class="col-md-4 mb-3">
            <label for="street" class="form-label">Rua</label>
            <input type="text" id="street" formControlName="street" class="form-control">
          </div>
          <div class="col-md-4 mb-3">
            <label for="neighborhood" class="form-label">Bairro</label>
            <input type="text" id="neighborhood" formControlName="neighborhood" class="form-control">
          </div>
          <div class="col-md-4 mb-3">
            <label for="complement" class="form-label">Complemento</label>
            <input type="text" id="complement" formControlName="complement" class="form-control">
          </div>
        </div>
      </section>

      <!-- Submit -->
      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary" [disabled]="formGroup.invalid">Enviar</button>
      </div>
    </form>
  </div>


</div>
